{"ast":null,"code":"import _slicedToArray from\"C:/Users/qkrcj/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/ad/SkyPlanner/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import{useLocation}from\"react-router-dom\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{FormInput,AuthFormTemplate,RegisterForm}from\"src/components\";import*as S from\"./styled\";import{AuthContext}from\"src/helper/AuthContext\";import{jsx as ___EmotionJSX}from\"@emotion/react\";export var AuthPage=function AuthPage(){var location=useLocation();var formType=location.pathname.split(\"/\")[2];var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),user_id=_useState2[0],setUser_id=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),user_pw=_useState4[0],setUser_pw=_useState4[1];var _useContext=useContext(AuthContext),setAuthState=_useContext.setAuthState;var onSubmit=function onSubmit(data){axios.post(\"http://localhost:8000/auth\",data).then(function(){console.log(data);navigate(\"/\");});};var login=function login(){var data={user_id:user_id,user_pw:user_pw};axios.post(\"http://localhost:8000/auth/login\",data).then(function(response){if(response.data.error){alert(response.data.error);}else{localStorage.setItem(\"accessToken\",response.data.token);setAuthState({user_id:response.data.user_id,id:response.data.id,status:true});navigate(\"/\");}});};return ___EmotionJSX(S.AuthPageFormContainer,null,___EmotionJSX(AuthFormTemplate,{onClick:login,formType:formType,loginForm:___EmotionJSX(React.Fragment,null,___EmotionJSX(FormInput,{placeholder:\"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",type:\"text\",onChange:function onChange(event){setUser_id(event.target.value);}}),___EmotionJSX(FormInput,{placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",type:\"password\",onChange:function onChange(event){setUser_pw(event.target.value);}})),registerForm:___EmotionJSX(React.Fragment,null,___EmotionJSX(RegisterForm,{label:\"\\uC774\\uB984\",placeholder:\"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",type:\"text\",name:\"user_name\"}),___EmotionJSX(RegisterForm,{label:\"\\uC774\\uBA54\\uC77C\",placeholder:\"\\uC774\\uBA54\\uC77C\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694. (\\uC120\\uD0DD, \\uAD11\\uACE0\\uC218\\uC2E0)\",type:\"email\",name:\"user_email\"}),___EmotionJSX(RegisterForm,{label:\"\\uC544\\uC774\\uB514\",placeholder:\"\\uC544\\uC774\\uB514 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",type:\"text\",name:\"user_id\"}),___EmotionJSX(RegisterForm,{label:\"\\uBE44\\uBC00\\uBC88\\uD638\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",type:\"password\",name:\"user_pw\"}),___EmotionJSX(RegisterForm,{label:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",type:\"password\",name:\"user_ch_pw\"})),onSubmit:onSubmit}));};","map":{"version":3,"names":["React","useContext","useState","useLocation","axios","useNavigate","FormInput","AuthFormTemplate","RegisterForm","S","AuthContext","AuthPage","location","formType","pathname","split","navigate","user_id","setUser_id","user_pw","setUser_pw","setAuthState","onSubmit","data","post","then","console","log","login","response","error","alert","localStorage","setItem","token","id","status","event","target","value"],"sources":["C:/Users/qkrcj/OneDrive/바탕 화면/ad/SkyPlanner/client/src/pages/auth/index.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { FormInput, AuthFormTemplate, RegisterForm } from \"src/components\";\r\n\r\nimport * as S from \"./styled\";\r\nimport { AuthContext } from \"src/helper/AuthContext\";\r\n\r\nexport const AuthPage = () => {\r\n  const location = useLocation();\r\n  const formType = location.pathname.split(\"/\")[2];\r\n  const navigate = useNavigate();\r\n  const [user_id, setUser_id] = useState(\"\");\r\n  const [user_pw, setUser_pw] = useState(\"\");\r\n  const { setAuthState } = useContext(AuthContext);\r\n\r\n  const onSubmit = (data) => {\r\n    axios.post(\"http://localhost:8000/auth\", data).then(() => {\r\n      console.log(data);\r\n      navigate(\"/\");\r\n    });\r\n  };\r\n  const login = () => {\r\n    const data = { user_id: user_id, user_pw: user_pw };\r\n    axios.post(\"http://localhost:8000/auth/login\", data).then((response) => {\r\n      if (response.data.error) {\r\n        alert(response.data.error);\r\n      } else {\r\n        localStorage.setItem(\"accessToken\", response.data.token);\r\n        setAuthState({\r\n          user_id: response.data.user_id,\r\n          id: response.data.id,\r\n          status: true,\r\n        });\r\n        navigate(\"/\");\r\n      }\r\n    });\r\n  };\r\n  return (\r\n    <S.AuthPageFormContainer>\r\n      <AuthFormTemplate\r\n        onClick={login}\r\n        formType={formType}\r\n        loginForm={\r\n          <>\r\n            <FormInput\r\n              placeholder=\"아이디를 입력해주세요.\"\r\n              type=\"text\"\r\n              onChange={(event) => {\r\n                setUser_id(event.target.value);\r\n              }}\r\n            />\r\n            <FormInput\r\n              placeholder=\"비밀번호를 입력해주세요.\"\r\n              type=\"password\"\r\n              onChange={(event) => {\r\n                setUser_pw(event.target.value);\r\n              }}\r\n            />\r\n          </>\r\n        }\r\n        registerForm={\r\n          <>\r\n            <RegisterForm\r\n              label=\"이름\"\r\n              placeholder=\"이름을 입력해주세요.\"\r\n              type=\"text\"\r\n              name=\"user_name\"\r\n            />\r\n            <RegisterForm\r\n              label=\"이메일\"\r\n              placeholder=\"이메일을 입력해주세요. (선택, 광고수신)\"\r\n              type=\"email\"\r\n              name=\"user_email\"\r\n            />\r\n            <RegisterForm\r\n              label=\"아이디\"\r\n              placeholder=\"아이디 입력해주세요.\"\r\n              type=\"text\"\r\n              name=\"user_id\"\r\n            />\r\n            <RegisterForm\r\n              label=\"비밀번호\"\r\n              placeholder=\"비밀번호 입력해주세요.\"\r\n              type=\"password\"\r\n              name=\"user_pw\"\r\n            />\r\n            <RegisterForm\r\n              label=\"비밀번호 확인\"\r\n              placeholder=\"비밀번호 입력해주세요.\"\r\n              type=\"password\"\r\n              name=\"user_ch_pw\"\r\n            />\r\n          </>\r\n        }\r\n        onSubmit={onSubmit}\r\n      />\r\n    </S.AuthPageFormContainer>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}